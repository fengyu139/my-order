import{r as d,c as R,i as fe,w as te,a as q,_ as z,b as A,o as g,d as E,e as w,f as F,n as G,g as pe,h as me,j as T,k as N,l as oe,m as ve,p as B,u as he,q as ye,s,t as l,v as c,x as V,F as Z,y as L,z as ge,D as _e,A as y,B as ke,C as be,E as Ce,G as $e,H as we,I as Te}from"./index-9136c8a7.js";import{F as Me,a as Ve}from"./index-60f91619.js";import{R as Oe,a as Pe}from"./index-afe63a0d.js";import{I as Se}from"./index-ea9c78a1.js";import{P as De}from"./index-0c842ce5.js";import{E as Be}from"./index-2911027f.js";import{B as Re}from"./index-bc0883c4.js";import{C as Ye}from"./index-ba3b948d.js";import{w as He}from"./Plus-c8a3ba86.js";import{u as xe}from"./index-7a7385e4-c33637fa.js";import"./Cell-29073c6c.js";import"./CheckNormal-3424058e.js";import"./index-97b44e6c-54cff6d4.js";var Ne=Object.defineProperty,Fe=Object.defineProperties,Ee=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,ee=(e,t,r)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ue=(e,t)=>{for(var r in t||(t={}))Ie.call(t,r)&&ee(e,r,t[r]);if(X)for(var r of X(t))je.call(t,r)&&ee(e,r,t[r]);return e},Le=(e,t)=>Fe(e,Ee(t));const{create:qe}=A("swipe"),ze=qe({props:{name:{type:String,default:""},touchMoveStopPropagation:{type:Boolean,default:!1},touchMovePreventDefault:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["open","close","click"],setup(e,{emit:t}){const r=a=>{var h;return((h=a.value)==null?void 0:h.getBoundingClientRect().width)||0},_=d(!1),i=d(),f=R(()=>r(i)),o=d(),m=R(()=>r(o)),p=fe("swipeGroup",null);te(()=>{var a;return(a=p==null?void 0:p.name)==null?void 0:a.value},a=>{e.name!==a&&p&&p.lock&&C()});const M=d(!1);let k="",O="";const v=q({offset:0,moving:!1}),P=(a="")=>{p&&p.update(e.name),M.value=!0,a&&(v.offset=a==="left"?-m.value:f.value),t("open",{name:e.name,position:k||a})},C=()=>{v.offset=0,M.value&&(M.value=!1,t("close",{name:e.name,position:k}))},S=(a,h,D)=>{D?a.stopPropagation():C(),t("click",h)},I=R(()=>({transform:`translate3d(${v.offset}px, 0, 0)`})),j=a=>{k=a>0?"right":"left";let h=a;switch(k){case"left":M.value&&O===k?h=-m.value:h=Math.abs(a)>m.value?-m.value:a;break;case"right":M.value&&O===k?h=f.value:h=Math.abs(a)>f.value?f.value:a;break}v.offset=h},$=xe();return Le(Ue({touchStyle:I},{onTouchStart(a){e.disabled||$.start(a)},onTouchMove(a){e.disabled||($.move(a),$.isHorizontal()&&(_.value=!0,v.moving=!0,j($.deltaX.value),e.touchMovePreventDefault&&a.preventDefault(),e.touchMoveStopPropagation&&a.stopPropagation()))},onTouchEnd(){if(v.moving){switch(v.moving=!1,O=k,k){case"left":Math.abs(v.offset)<=m.value/2?C():(v.offset=-m.value,P());break;case"right":Math.abs(v.offset)<=f.value/2?C():(v.offset=f.value,P());break}setTimeout(()=>{_.value=!1},0)}}}),{leftRef:i,rightRef:o,open:P,close:C,onClick:S,lockClick:_})}});function Ae(e,t,r,_,i,f){return g(),E("view",{class:"nut-swipe",style:G(e.touchStyle),onTouchstart:t[3]||(t[3]=(...o)=>e.onTouchStart&&e.onTouchStart(...o)),onTouchmove:t[4]||(t[4]=(...o)=>e.onTouchMove&&e.onTouchMove(...o)),onTouchend:t[5]||(t[5]=(...o)=>e.onTouchEnd&&e.onTouchEnd(...o)),onTouchcancel:t[6]||(t[6]=(...o)=>e.onTouchEnd&&e.onTouchEnd(...o))},[w("view",{ref:"leftRef",class:"nut-swipe__left",onClick:t[0]||(t[0]=o=>e.onClick(o,"left",!0))},[F(e.$slots,"left")],512),w("view",{class:"nut-swipe__content",onClick:t[1]||(t[1]=o=>e.onClick(o,"content",e.lockClick))},[F(e.$slots,"default")]),w("view",{ref:"rightRef",class:"nut-swipe__right",onClick:t[2]||(t[2]=o=>e.onClick(o,"right",!0))},[F(e.$slots,"right")],512)],36)}const Ge=z(ze,[["render",Ae]]),We=e=>e,Je=We(Ge),{create:Ke}=A("tag"),Qe=Ke({props:{color:{type:String,default:""},textColor:{type:String,default:""},type:{type:String,default:"default"},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1},mark:{type:Boolean,default:!1},closeable:{type:Boolean,default:!1}},components:{Close:pe},emits:["close","click"],setup(e,{emit:t}){const r=R(()=>{const o="nut-tag";return{[o]:!0,[`${o}--${e.type}`]:e.type,[`${o}--plain`]:e.plain,[`${o}--round`]:e.round,[`${o}--mark`]:e.mark}}),_=R(()=>{const o={};return e.textColor?o.color=e.textColor:e.color&&e.plain&&(o.color=e.color),e.plain?(o.background="#fff",o["border-color"]=e.color):e.color&&(o.background=e.color),o});return{classes:r,style:_,onClose:o=>{o.stopPropagation(),t("close",o)},onClick:o=>{t("click",o)}}}});function Ze(e,t,r,_,i,f){const o=me("Close");return g(),E("view",{class:oe(e.classes),style:G(e.style),onClick:t[0]||(t[0]=(...m)=>e.onClick&&e.onClick(...m))},[F(e.$slots,"default"),e.closeable?(g(),T(o,{key:0,class:"nut-tag--close",width:"12px",height:"12px",onClick:e.onClose},null,8,["onClick"])):N("",!0)],6)}const Xe=z(Qe,[["render",Ze]]),et=e=>e,tt=et(Xe),{create:ot}=A("animate"),at=ot({props:{type:{type:String,default:""},show:{type:Boolean,defualt:!1},action:{type:String,default:""},loop:{type:Boolean,default:!1},duration:{type:[String,Number],defualt:500}},emits:["click","animate"],setup(e,{emit:t}){const r=d(e.action==="initial"||e.show===!0||e.loop),_=R(()=>({"nut-animate__container":!0,[`nut-animate-${e.type}`]:r.value,loop:e.loop})),i=()=>{r.value=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.value=!0})})},f=o=>{e.action==="click"&&(i(),t("click",o),t("animate"))};return te(()=>e.show,o=>{o&&(i(),t("animate"))}),{classes:_,handleClick:f}}}),nt={class:"nut-animate"};function lt(e,t,r,_,i,f){return g(),E("view",nt,[w("view",{class:oe(e.classes),style:G({animationDuration:e.duration?`${e.duration}ms`:void 0}),onClick:t[0]||(t[0]=(...o)=>e.handleClick&&e.handleClick(...o))},[F(e.$slots,"default")],6)])}const st=z(at,[["render",lt]]),rt=e=>e,ut=rt(st);const it={class:"pb-[50px] min-h-[80vh]"},ct={class:"flex justify-center items-center text-red-500 pt-[12px]"},dt={class:"mt-[4px]"},ft={class:"p-[12px]"},Mt=ve({__name:"home",setup(e){const t=q({startTime:"",endTime:""});B().hour()<12?(t.startTime=B().startOf("day").subtract(12,"hour").format("YYYY-MM-DD HH:mm:ss"),t.endTime=B().endOf("day").subtract(12,"hour").format("YYYY-MM-DD HH:mm:ss")):(t.startTime=B().startOf("day").add(12,"hour").format("YYYY-MM-DD HH:mm:ss"),t.endTime=B().endOf("day").add(12,"hour").format("YYYY-MM-DD HH:mm:ss"));const _=he(),i=ye();i.getOrderList(t);const f=async()=>{i.updateOrder(a).then(()=>{L.success("设置成功"),i.getOrderList(t),k.value[h.value].close()})},o=d(!1),m=d(!1),p=d(""),M=()=>{if(!p.value){L.fail("请输入订单名称"),setTimeout(()=>{o.value=!0},500);return}ge.post("/addOrder",{orderName:p.value,isPack:C.value=="2",taste:Number(S.value),isFinish:!1,totalMoney:0,actualMoney:0,desk:Number(D.value)||""}).then(b=>{b.code==1&&(L.success("订单创建成功,请添加菜品"),P(b.data,p.value))})},k=d(null),O=d(null),v=()=>{let b=B().format("HH:mm");p.value=b+"-"+(i.orderList.length+1)+"号订单",o.value=!0,Te(()=>{O.value.focus()})},P=(b,u)=>{_.push({path:"/orderDetail",query:{id:b,orderName:u}})},C=d("1"),S=d("1"),I=["正常辣","微辣","特辣"],j=["","danger","warning"],$=d(!1),W=()=>{i.getOrderList(t),setTimeout(()=>{$.value=!1},500)},a=q({actualMoney:"",id:"",isFinish:!0}),h=d(-1),D=d(""),ae=b=>b.orderName+(b.desk?"-"+b.desk+"号桌":"");return(b,u)=>{const Y=tt,ne=ut,H=Ye,J=Re,le=Je,se=Be,re=De,U=Se,x=Oe,K=Pe,Q=_e,ue=Me,ie=Ve;return g(),E(Z,null,[w("div",it,[s(re,{modelValue:c($),"onUpdate:modelValue":u[0]||(u[0]=n=>V($)?$.value=n:null),onRefresh:W},{default:l(()=>[w("div",null,[w("h2",ct,[y(" 今日订单 "),s(c(ke),{class:"ml-[4px]"})]),(g(!0),E(Z,null,be(c(i).orderList,(n,ce)=>(g(),T(le,{onClick:de=>P(n.id,n.orderName),ref_for:!0,ref_key:"swipe",ref:k,key:n.id},Ce({default:l(()=>[s(H,{title:ae(n),"sub-title":`创建时间：${n.showTime}`},{link:l(()=>[w("div",dt,[n.isFinish?(g(),T(Y,{key:1,type:"success",style:{height:"26px","margin-right":"4px"}},{default:l(()=>[y("已完成")]),_:1})):(g(),T(Y,{key:0,type:"warning",style:{height:"26px","margin-right":"4px"}},{default:l(()=>[y("进行中")]),_:1})),n.isPack?(g(),T(Y,{key:2,type:"success",style:{height:"26px","margin-right":"4px"}},{default:l(()=>[y("打包")]),_:1})):N("",!0),n.taste&&n.taste!=1?(g(),T(Y,{key:3,type:j[n.taste],style:{height:"26px","margin-right":"4px"}},{default:l(()=>[y(we(I[n.taste-1]),1)]),_:2},1032,["type"])):N("",!0),n.undoneRecord?(g(),T(ne,{key:4,type:"flicker",loop:!0,style:{position:"absolute",left:"50%",top:"0",transform:"translateX(-50%)"}},{default:l(()=>[s(Y,{type:"danger",style:{height:"20px"}},{default:l(()=>[y("有加菜")]),_:1})]),_:1})):N("",!0)])]),_:2},1032,["title","sub-title"])]),_:2},[n.isFinish?void 0:{name:"right",fn:l(()=>[s(J,{shape:"square",style:{height:"100%"},type:"danger",onClick:$e(de=>{m.value=!0,c(a).actualMoney=String(n.totalMoney),c(a).id=n.id,h.value=ce},["stop"])},{default:l(()=>[y(" 设置已完成 ")]),_:2},1032,["onClick"])]),key:"0"}]),1032,["onClick"]))),128)),c(i).orderList.length==0?(g(),T(se,{key:0,description:"今日还没有开张哦"})):N("",!0)]),w("div",ft,[s(J,{block:"",type:"primary",onClick:v},{icon:l(()=>[s(c(He))]),default:l(()=>[y(" 添加订单 ")]),_:1})])]),_:1},8,["modelValue"])]),s(Q,{teleport:"#app",title:"添加订单",visible:c(o),"onUpdate:visible":u[5]||(u[5]=n=>V(o)?o.value=n:null),onOk:M,"ok-auto-close":!1},{default:l(()=>[s(H,null,{default:l(()=>[s(U,{ref_key:"orderInput",ref:O,modelValue:c(p),"onUpdate:modelValue":u[1]||(u[1]=n=>V(p)?p.value=n:null),placeholder:"请输入订单名称",clearable:""},null,8,["modelValue"])]),_:1}),s(H,null,{default:l(()=>[s(K,{modelValue:c(C),"onUpdate:modelValue":u[2]||(u[2]=n=>V(C)?C.value=n:null),direction:"horizontal"},{default:l(()=>[s(x,{label:"1"},{default:l(()=>[y("在这吃")]),_:1}),s(x,{label:"2"},{default:l(()=>[y("打包")]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(H,null,{default:l(()=>[s(K,{modelValue:c(S),"onUpdate:modelValue":u[3]||(u[3]=n=>V(S)?S.value=n:null),direction:"horizontal"},{default:l(()=>[s(x,{label:"1"},{default:l(()=>[y("正常辣")]),_:1}),s(x,{label:"2"},{default:l(()=>[y("微辣")]),_:1}),s(x,{label:"3"},{default:l(()=>[y("特辣")]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(H,null,{default:l(()=>[s(U,{modelValue:c(D),"onUpdate:modelValue":u[4]||(u[4]=n=>V(D)?D.value=n:null),type:"digit",placeholder:"请输入桌号(选填)",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["visible"]),s(Q,{teleport:"#app",title:"设置订单已完成",visible:c(m),"onUpdate:visible":u[7]||(u[7]=n=>V(m)?m.value=n:null),onOk:f,"ok-auto-close":!1},{default:l(()=>[s(ie,null,{default:l(()=>[s(ue,{label:"实收金额"},{default:l(()=>[s(U,{modelValue:c(a).actualMoney,"onUpdate:modelValue":u[6]||(u[6]=n=>c(a).actualMoney=n),class:"nut-input-text",placeholder:"请输入实收金额",type:"text"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["visible"])],64)}}});export{Mt as default};
