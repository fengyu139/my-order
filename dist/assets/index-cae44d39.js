import{I as G,J,o as c,e as p,m as O,n as N,f as d,d as H,w as Q,ah as U,r as _,b as X,c as C,a as Y,K as Z,g as y,l as v,h as ee,u as k,ak as te,G as B,A as ae,a9 as re,aj as oe,W as ne,t as le,R as se}from"./index-3f55ee30.js";import{u as ie}from"./common-BH7uB7Cn-ad9c9445.js";const ue=J("mask-close"),ce=d("path",{d:"M512 14.897C238.594 14.897 14.897 238.594 14.897 512S238.594 1009.103 512 1009.103 1009.103 785.406 1009.103 512 785.406 14.897 512 14.897zm207.126 646.234c16.57 16.57 16.57 41.425 0 57.995s-41.425 16.57-57.995 0L512 569.996l-149.13 149.13c-16.57 16.57-41.426 16.57-57.996 0s-16.57-41.425 0-57.995L454.004 512l-149.13-149.13c-16.57-16.57-16.57-41.426 0-57.996s41.425-16.57 57.995 0L512 454.004l149.13-149.13c16.57-16.57 41.426-16.57 57.996 0s16.57 41.425 0 57.995L569.996 512l149.13 149.13z",fill:"currentColor","fill-opacity":"0.9"},null,-1),de=[ce];function pe(t,r,o,a,l,s){return c(),p("svg",{class:O(t.classes),style:N(t.style),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",role:"presentation"},de,6)}const fe=G(ue,[["render",pe]]);var me=Object.defineProperty,ge=Object.defineProperties,he=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable,V=(t,r,o)=>r in t?me(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,P=(t,r)=>{for(var o in r||(r={}))ye.call(r,o)&&V(t,o,r[o]);if(L)for(var o of L(r))ve.call(r,o)&&V(t,o,r[o]);return t},be=(t,r)=>ge(t,he(r));function I(t,r,o){const a=t.indexOf(r);return a===-1?t:r==="-"&&a!==0?t.slice(0,a):t.slice(0,a+1)+t.slice(a).replace(o,"")}function we(t,r=!0,o=!0){r?t=I(t,".",/\./g):t=t.split(".")[0],o?t=I(t,"-",/-/g):t=t.replace(/-/,"");const a=r?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(a,"")}function _e(t){return t==="number"?{type:"text",inputmode:"decimal"}:t==="digit"?{type:"tel",inputmode:"numeric"}:{type:t}}const Ce={class:"nut-input-value"},ke={class:"nut-input-inner"},Be={key:0,class:"nut-input-left-box"},Le={class:"nut-input-box"},Ve={key:0,class:"nut-input-word-limit"},Pe={class:"nut-input-word-num"},Ie={class:"nut-input-right-box"},Oe=H(be(P({},{name:"NutInput"}),{__name:"input",props:{type:{default:"text"},modelValue:{default:""},placeholder:{default:""},inputAlign:{default:"left"},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxLength:{default:""},clearable:{type:Boolean,default:!1},clearSize:{default:"14"},border:{type:Boolean,default:!0},formatTrigger:{default:"onChange"},formatter:{},showWordLimit:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},confirmType:{default:"done"},error:{type:Boolean,default:!1},showClearIcon:{type:Boolean,default:!1}},emits:["update:modelValue","blur","focus","clear","keypress","click","clickInput","confirm"],setup(t,{expose:r,emit:o}){const a=t,l=o,s=ie(U(a,"disabled")),g=_(!1),i=_(),u=()=>{var e;return String((e=a.modelValue)!=null?e:"")},S=e=>ne("input",P({},_e(e))),h=X({focused:!1,validateFailed:!1,validateMessage:""}),x=C(()=>{const e="nut-input";return{[e]:!0,[`${e}--disabled`]:s.value,[`${e}--required`]:a.required,[`${e}--error`]:a.error,[`${e}--border`]:a.border}}),z=C(()=>({textAlign:a.inputAlign})),$=e=>{if(!e.target.composing){let n=e.target.value;a.maxLength&&n.length>Number(a.maxLength)&&(n=n.slice(0,Number(a.maxLength))),f(n)}},f=(e,m="onChange")=>{var n;if(["number","digit"].includes(a.type)){const w=a.type==="number";e=we(e,w,w)}a.formatter&&m===a.formatTrigger&&(e=a.formatter(e)),((n=i==null?void 0:i.value)==null?void 0:n.value)!==e&&(i.value.value=e),e!==a.modelValue&&l("update:modelValue",e)},T=e=>{s.value||a.readonly||(g.value=!0,l("focus",e))},E=e=>{if(s.value||a.readonly)return;setTimeout(()=>{g.value=!1},200);let n=e.target.value;a.maxLength&&n.length>Number(a.maxLength)&&(n=n.slice(0,Number(a.maxLength))),f(u(),"onBlur"),l("blur",e)},j=e=>{e.stopPropagation(),!s.value&&(l("update:modelValue","",e),l("clear","",e))},D=()=>{h.validateFailed&&(h.validateFailed=!1,h.validateMessage="")},F=e=>{s.value||l("clickInput",e)},M=e=>{l("click",e)},A=({target:e})=>{e.composing=!0},b=({target:e})=>{e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))};Y(()=>a.modelValue,()=>{f(u()),D()}),Z(()=>{f(u(),a.formatTrigger)});const R=()=>{var e;(e=i.value)==null||e.focus()},q=()=>{var e;(e=i.value)==null||e.blur()},W=()=>{var e;(e=i.value)==null||e.select()},K=e=>{e.key==="Enter"&&l("confirm",e)};return r({focus:R,blur:q,select:W}),(e,m)=>(c(),p("view",{class:O(x.value),onClick:M},[d("view",Ce,[d("view",ke,[e.$slots.left?(c(),p("view",Be,[y(e.$slots,"left")])):v("",!0),d("view",Le,[(c(),ee(te(S(e.type)),{ref_key:"inputRef",ref:i,class:"input-text",style:N(z.value),maxlength:e.maxLength,placeholder:e.placeholder,disabled:k(s),readonly:e.readonly,value:e.modelValue,"format-trigger":e.formatTrigger,autofocus:e.autofocus,enterkeyhint:e.confirmType,onInput:$,onFocus:T,onBlur:E,onClick:F,onChange:b,onCompositionend:b,onCompositionstart:A,onKeyup:K},null,40,["style","maxlength","placeholder","disabled","readonly","value","format-trigger","autofocus","enterkeyhint"])),e.showWordLimit&&e.maxLength?(c(),p("view",Ve,[d("span",Pe,B(u()?u().length:0),1),ae("/"+B(e.maxLength),1)])):v("",!0)]),e.clearable&&!e.readonly?re((c(),p("view",{key:1,class:"nut-input-clear-box",onClick:j},[y(e.$slots,"clear",{},()=>[le(k(fe),se({class:"nut-input-clear"},e.$attrs,{size:e.clearSize,width:e.clearSize,height:e.clearSize}),null,16,["size","width","height"])])],512)),[[oe,(g.value||e.showClearIcon)&&u().length>0]]):v("",!0),d("view",Ie,[y(e.$slots,"right")])])])],2))}}));Q(Oe);export{Oe as _};
