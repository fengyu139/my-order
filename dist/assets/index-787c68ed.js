import{K as F,L as K,o as s,d as c,l as V,n as B,e as i,r as b,a as A,c as C,w as j,M as q,_ as D,b as R,V as W,h as H,f as g,k as y,j as Q,al as G,H as v,A as J,ab as U,ak as X,s as Y,Q as Z}from"./index-394e3bcc.js";const _=K("mask-close"),x=i("path",{d:"M512 14.897C238.594 14.897 14.897 238.594 14.897 512S238.594 1009.103 512 1009.103 1009.103 785.406 1009.103 512 785.406 14.897 512 14.897zm207.126 646.234c16.57 16.57 16.57 41.425 0 57.995s-41.425 16.57-57.995 0L512 569.996l-149.13 149.13c-16.57 16.57-41.426 16.57-57.996 0s-16.57-41.425 0-57.995L454.004 512l-149.13-149.13c-16.57-16.57-16.57-41.426 0-57.996s41.425-16.57 57.995 0L512 454.004l149.13-149.13c16.57-16.57 41.426-16.57 57.996 0s16.57 41.425 0 57.995L569.996 512l149.13 149.13z",fill:"currentColor","fill-opacity":"0.9"},null,-1),ee=[x];function te(e,n,o,l,r,m){return s(),c("svg",{class:V(e.classes),style:B(e.style),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",role:"presentation"},ee,6)}const ne=F(_,[["render",te]]);var oe=Object.defineProperty,w=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable,k=(e,n,o)=>n in e?oe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,re=(e,n)=>{for(var o in n||(n={}))le.call(n,o)&&k(e,o,n[o]);if(w)for(var o of w(n))ae.call(n,o)&&k(e,o,n[o]);return e};function S(e,n,o){const l=e.indexOf(n);return l===-1?e:n==="-"&&l!==0?e.slice(0,l):e.slice(0,l+1)+e.slice(l).replace(o,"")}function se(e,n=!0,o=!0){n?e=S(e,".",/\./g):e=e.split(".")[0],o?e=S(e,"-",/-/g):e=e.replace(/-/,"");const l=n?/[^-0-9.]/g:/[^-0-9]/g;return e.replace(l,"")}function ie(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}const{componentName:ue,create:de}=R("input"),ce=de({props:{type:{type:String,default:"text"},modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},inputAlign:{type:String,default:"left"},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxLength:{type:[String,Number],default:""},clearable:{type:Boolean,default:!1},clearSize:{type:[String,Number],default:"14"},border:{type:Boolean,default:!0},formatTrigger:{type:String,default:"onChange"},formatter:{type:Function,default:null},showWordLimit:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},confirmType:{type:String,default:"done"},error:{type:Boolean,default:!1},showClearIcon:{type:Boolean,default:!1},class:{type:String,default:""}},components:{MaskClose:ne},emits:["update:modelValue","blur","focus","clear","keypress","click","clickInput","confirm"],expose:["focus","blur","select"],setup(e,{emit:n}){const o=b(!1),l=b(),r=()=>{var t;return String((t=e.modelValue)!=null?t:"")},m=t=>W("input",re({},ie(t))),u=A({focused:!1,validateFailed:!1,validateMessage:""}),d=C(()=>{const t=ue;return{[t]:!0,[`${t}--disabled`]:e.disabled,[`${t}--required`]:e.required,[`${t}--error`]:e.error,[`${t}--border`]:e.border,[e.class]:!!e.class}}),L=C(()=>({textAlign:e.inputAlign})),I=t=>{if(!t.target.composing){let a=t.target.value;e.maxLength&&a.length>Number(e.maxLength)&&(a=a.slice(0,Number(e.maxLength))),f(a)}},f=(t,p="onChange")=>{var a;if(["number","digit"].includes(e.type)){const h=e.type==="number";t=se(t,h,h)}e.formatter&&p===e.formatTrigger&&(t=e.formatter(t)),((a=l==null?void 0:l.value)==null?void 0:a.value)!==t&&(l.value.value=t),t!==e.modelValue&&n("update:modelValue",t)},N=t=>{e.disabled||e.readonly||(o.value=!0,n("focus",t))},$=t=>{if(e.disabled||e.readonly)return;setTimeout(()=>{o.value=!1},200);let a=t.target.value;e.maxLength&&a.length>Number(e.maxLength)&&(a=a.slice(0,Number(e.maxLength))),f(r(),"onBlur"),n("blur",t)},M=t=>{t.stopPropagation(),!e.disabled&&(n("update:modelValue","",t),n("clear","",t))},z=()=>{u.validateFailed&&(u.validateFailed=!1,u.validateMessage="")},O=t=>{e.disabled||n("clickInput",t)},P=t=>{n("click",t)},T=({target:t})=>{t.composing=!0},E=({target:t})=>{t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))};return j(()=>e.modelValue,()=>{f(r()),z()}),q(()=>{f(r(),e.formatTrigger)}),{renderInput:m,inputRef:l,active:o,classes:d,styles:L,onInput:I,onFocus:N,onBlur:$,clear:M,startComposing:T,endComposing:E,onClick:P,onClickInput:O,focus:()=>{var t;(t=l.value)==null||t.focus()},blur:()=>{var t;(t=l.value)==null||t.blur()},select:()=>{var t;(t=l.value)==null||t.select()},onKeyup:t=>{t.key==="Enter"&&n("confirm",t)},getModelValue:r}}}),fe={class:"nut-input-value"},me={class:"nut-input-inner"},pe={key:0,class:"nut-input-left-box"},ge={class:"nut-input-box"},ye={key:0,class:"nut-input-word-limit"},he={class:"nut-input-word-num"},be={class:"nut-input-right-box"};function Ce(e,n,o,l,r,m){const u=H("MaskClose");return s(),c("view",{class:V(e.classes),onClick:n[1]||(n[1]=(...d)=>e.onClick&&e.onClick(...d))},[i("view",fe,[i("view",me,[e.$slots.left?(s(),c("view",pe,[g(e.$slots,"left")])):y("",!0),i("view",ge,[(s(),Q(G(e.renderInput(e.type)),{ref:"inputRef",class:"input-text",style:B(e.styles),maxlength:e.maxLength,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,value:e.modelValue,"format-trigger":e.formatTrigger,autofocus:e.autofocus,enterkeyhint:e.confirmType,onInput:e.onInput,onFocus:e.onFocus,onBlur:e.onBlur,onClick:e.onClickInput,onChange:e.endComposing,onCompositionend:e.endComposing,onCompositionstart:e.startComposing,onKeyup:e.onKeyup},null,40,["style","maxlength","placeholder","disabled","readonly","value","format-trigger","autofocus","enterkeyhint","onInput","onFocus","onBlur","onClick","onChange","onCompositionend","onCompositionstart","onKeyup"])),e.showWordLimit&&e.maxLength?(s(),c("view",ye,[i("span",he,v(e.getModelValue()?e.getModelValue().length:0),1),J("/"+v(e.maxLength),1)])):y("",!0)]),e.clearable&&!e.readonly?U((s(),c("view",{key:1,class:"nut-input-clear-box",onClick:n[0]||(n[0]=(...d)=>e.clear&&e.clear(...d))},[g(e.$slots,"clear",{},()=>[Y(u,Z({class:"nut-input-clear"},e.$attrs,{size:e.clearSize,width:e.clearSize,height:e.clearSize}),null,16,["size","width","height"])])],512)),[[X,(e.active||e.showClearIcon)&&e.getModelValue().length>0]]):y("",!0),i("view",be,[g(e.$slots,"right")])])])],2)}const Be=D(ce,[["render",Ce]]);export{Be as i};
