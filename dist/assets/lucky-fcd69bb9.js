import{d as w,r as _,K as x,o as y,e as M,f as i,y as k,Y as P}from"./index-3f55ee30.js";const I={class:"lucky-container"},C={class:"wheel-container"},D=w({__name:"lucky",setup(R){const a=_(null);let u=null;const v=_(!1),o=_(0),n=[{name:"一等奖",color:"#FFF4D6"},{name:"二等奖",color:"#FFFFFF"},{name:"三等奖",color:"#FFF4D6"},{name:"四等奖",color:"#FFFFFF"},{name:"五等奖",color:"#FFF4D6"},{name:"六等奖",color:"#FFFFFF"}],d=()=>{if(!u||!a.value)return;const e=u,l=a.value.width/2,c=l-20,t=Math.PI*2/n.length;e.save(),e.translate(l,l),e.rotate(o.value),n.forEach((h,r)=>{e.beginPath(),e.moveTo(0,0),e.arc(0,0,c,r*t,(r+1)*t),e.closePath(),e.fillStyle=h.color,e.fill(),e.stroke(),e.save(),e.rotate(r*t+t/2),e.textAlign="right",e.fillStyle="#333333",e.font="14px Arial",e.fillText(h.name,c-30,0),e.restore()}),e.restore()},m=()=>{if(v.value)return;v.value=!0;const e=o.value+Math.PI*2*8+Math.random()*Math.PI*2,s=5e3,l=Date.now(),c=o.value,t=()=>{const r=Date.now()-l,f=Math.min(r/s,1),p=F=>1-Math.pow(1-F,3);if(o.value=c+(e-c)*p(f),d(),f<1)requestAnimationFrame(t);else{v.value=!1;const F=o.value%(Math.PI*2),g=Math.floor(F/(Math.PI*2)*n.length)%n.length;k.text(`恭喜获得${n[g].name}！`)}};t()};return x(()=>{if(a.value){const e=a.value;u=e.getContext("2d"),e.width=300,e.height=300,d()}}),(e,s)=>(y(),M("div",I,[i("div",C,[i("canvas",{ref_key:"wheelCanvas",ref:a,class:"wheel-canvas"},null,512),i("div",{class:"wheel-pointer",onClick:m},s[0]||(s[0]=[i("div",{class:"pointer"},null,-1)]))])]))}});const A=P(D,[["__scopeId","data-v-425795aa"]]);export{A as default};
