import{r as d,c as x,i as fe,w as te,a as q,_ as z,b as W,o as _,d as E,e as w,f as R,n as A,g as pe,h as me,j as T,k as F,l as oe,m as ve,p as N,u as ye,q as he,s,t as l,v as c,x as S,F as Z,y as L,z as _e,D as ge,A as h,B as ke,C as be,E as Ce,G as $e,H as we,I as Te,J as Me}from"./index-394e3bcc.js";import{N as Se,a as Ve}from"./index-e5866042.js";import{_ as Oe,a as Pe}from"./index-9f16b64c.js";import{i as De}from"./index-787c68ed.js";import{i as Ne}from"./index-8b7b3ca9.js";import{i as xe}from"./index-4cbe4058.js";/* empty css              *//* empty css              */import{w as Ye}from"./Plus-c98d7022.js";import{N as Be}from"./Cell-8767dc6a.js";import{u as He}from"./index-084nl_oE-5e48f214.js";import"./pxCheck-OnXlN1NC-3938f682.js";import"./CheckNormal-4c869903.js";import"./index-xDfQLRen-7e0e5c62.js";const Fe=Symbol("nut-swipe");var Re=Object.defineProperty,Ee=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,ee=(e,t,r)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Le=(e,t)=>{for(var r in t||(t={}))je.call(t,r)&&ee(e,r,t[r]);if(X)for(var r of X(t))Ue.call(t,r)&&ee(e,r,t[r]);return e},qe=(e,t)=>Ee(e,Ie(t));const{create:ze}=W("swipe"),We=ze({props:{name:{type:String,default:""},touchMoveStopPropagation:{type:Boolean,default:!1},touchMovePreventDefault:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["open","close","click"],setup(e,{emit:t}){const r=n=>{var y;return((y=n.value)==null?void 0:y.getBoundingClientRect().width)||0},g=d(!1),u=d(),f=x(()=>r(u)),o=d(),m=x(()=>r(o)),p=fe(Fe,null);te(()=>{var n;return(n=p==null?void 0:p.name)==null?void 0:n.value},n=>{e.name!==n&&p&&p.lock&&C()});const M=d(!1);let k="",V="";const v=q({offset:0,moving:!1}),O=(n="")=>{p&&p.update(e.name),M.value=!0,n&&(v.offset=n==="left"?-m.value:f.value),t("open",{name:e.name,position:k||n})},C=()=>{v.offset=0,M.value&&(M.value=!1,t("close",{name:e.name,position:k}))},P=(n,y,D)=>{D?n.stopPropagation():C(),t("click",y)},I=x(()=>({transform:`translate3d(${v.offset}px, 0, 0)`})),j=n=>{k=n>0?"right":"left";let y=n;switch(k){case"left":M.value&&V===k?y=-m.value:y=Math.abs(n)>m.value?-m.value:n;break;case"right":M.value&&V===k?y=f.value:y=Math.abs(n)>f.value?f.value:n;break}v.offset=y},$=He();return qe(Le({touchStyle:I},{onTouchStart(n){e.disabled||$.start(n)},onTouchMove(n){e.disabled||($.move(n),$.isHorizontal()&&(g.value=!0,v.moving=!0,j($.deltaX.value),e.touchMovePreventDefault&&n.preventDefault(),e.touchMoveStopPropagation&&n.stopPropagation()))},onTouchEnd(){if(v.moving){switch(v.moving=!1,V=k,k){case"left":Math.abs(v.offset)<=m.value/2?C():(v.offset=-m.value,O());break;case"right":Math.abs(v.offset)<=f.value/2?C():(v.offset=f.value,O());break}setTimeout(()=>{g.value=!1},0)}}}),{leftRef:u,rightRef:o,open:O,close:C,onClick:P,lockClick:g})}});function Ae(e,t,r,g,u,f){return _(),E("view",{class:"nut-swipe",style:A(e.touchStyle),onTouchstart:t[3]||(t[3]=(...o)=>e.onTouchStart&&e.onTouchStart(...o)),onTouchmove:t[4]||(t[4]=(...o)=>e.onTouchMove&&e.onTouchMove(...o)),onTouchend:t[5]||(t[5]=(...o)=>e.onTouchEnd&&e.onTouchEnd(...o)),onTouchcancel:t[6]||(t[6]=(...o)=>e.onTouchEnd&&e.onTouchEnd(...o))},[w("view",{ref:"leftRef",class:"nut-swipe__left",onClick:t[0]||(t[0]=o=>e.onClick(o,"left",!0))},[R(e.$slots,"left")],512),w("view",{class:"nut-swipe__content",onClick:t[1]||(t[1]=o=>e.onClick(o,"content",e.lockClick))},[R(e.$slots,"default")]),w("view",{ref:"rightRef",class:"nut-swipe__right",onClick:t[2]||(t[2]=o=>e.onClick(o,"right",!0))},[R(e.$slots,"right")],512)],36)}const Ge=z(We,[["render",Ae]]),{create:Je}=W("tag"),Ke=Je({props:{color:{type:String,default:""},textColor:{type:String,default:""},type:{type:String,default:"default"},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1},mark:{type:Boolean,default:!1},closeable:{type:Boolean,default:!1}},components:{Close:pe},emits:["close","click"],setup(e,{emit:t}){const r=x(()=>{const o="nut-tag";return{[o]:!0,[`${o}--${e.type}`]:e.type,[`${o}--plain`]:e.plain,[`${o}--round`]:e.round,[`${o}--mark`]:e.mark}}),g=x(()=>{const o={};return e.textColor?o.color=e.textColor:e.color&&e.plain&&(o.color=e.color),e.plain?(o.background="#fff",o["border-color"]=e.color):e.color&&(o.background=e.color),o});return{classes:r,style:g,onClose:o=>{o.stopPropagation(),t("close",o)},onClick:o=>{t("click",o)}}}});function Qe(e,t,r,g,u,f){const o=me("Close");return _(),E("view",{class:oe(e.classes),style:A(e.style),onClick:t[0]||(t[0]=(...m)=>e.onClick&&e.onClick(...m))},[R(e.$slots,"default"),e.closeable?(_(),T(o,{key:0,class:"nut-tag--close",width:"12px",height:"12px",onClick:e.onClose},null,8,["onClick"])):F("",!0)],6)}const Ze=z(Ke,[["render",Qe]]),{create:Xe}=W("animate"),et=Xe({props:{type:{type:String,default:""},show:{type:Boolean,defualt:!1},action:{type:String,default:""},loop:{type:Boolean,default:!1},duration:{type:[String,Number],defualt:500}},emits:["click","animate"],setup(e,{emit:t}){const r=d(e.action==="initial"||e.show===!0||e.loop),g=x(()=>({"nut-animate__container":!0,[`nut-animate-${e.type}`]:r.value,loop:e.loop})),u=()=>{r.value=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{r.value=!0})})},f=o=>{e.action==="click"&&(u(),t("click",o),t("animate"))};return te(()=>e.show,o=>{o&&(u(),t("animate"))}),{classes:g,handleClick:f}}}),tt={class:"nut-animate"};function ot(e,t,r,g,u,f){return _(),E("view",tt,[w("view",{class:oe(e.classes),style:A({animationDuration:e.duration?`${e.duration}ms`:void 0}),onClick:t[0]||(t[0]=(...o)=>e.handleClick&&e.handleClick(...o))},[R(e.$slots,"default")],6)])}const nt=z(et,[["render",ot]]);const at={class:"pb-[50px] min-h-[80vh]"},lt={class:"flex justify-center items-center text-red-500 pt-[12px]"},st={class:"mt-[4px]"},rt={class:"p-[12px]"},Ct=ve({__name:"home",setup(e){const t=q({startTime:"",endTime:""});N().hour()<12?(t.startTime=N().startOf("day").subtract(12,"hour").format("YYYY-MM-DD HH:mm:ss"),t.endTime=N().endOf("day").subtract(12,"hour").format("YYYY-MM-DD HH:mm:ss")):(t.startTime=N().startOf("day").add(12,"hour").format("YYYY-MM-DD HH:mm:ss"),t.endTime=N().endOf("day").add(12,"hour").format("YYYY-MM-DD HH:mm:ss"));const g=ye(),u=he();u.getOrderList(t);const f=async()=>{u.updateOrder(n).then(()=>{L.success("设置成功"),u.getOrderList(t),k.value[y.value].close()})},o=d(!1),m=d(!1),p=d(""),M=()=>{if(!p.value){L.fail("请输入订单名称"),setTimeout(()=>{o.value=!0},500);return}_e.post("/addOrder",{orderName:p.value,isPack:C.value=="2",taste:Number(P.value),isFinish:!1,totalMoney:0,actualMoney:0,desk:Number(D.value)||""}).then(b=>{b.code==1&&(L.success("订单创建成功,请添加菜品"),O(b.data,p.value))})},k=d(null),V=d(null),v=()=>{let b=N().format("HH:mm");p.value=b+"-"+(u.orderList.length+1)+"号订单",o.value=!0,Te(()=>{V.value.focus()})},O=(b,i)=>{g.push({path:"/orderDetail",query:{id:b,orderName:i}})},C=d("1"),P=d("1"),I=["正常辣","微辣","特辣"],j=["","danger","warning"],$=d(!1),G=()=>{u.getOrderList(t),setTimeout(()=>{$.value=!1},500)},n=q({actualMoney:"",id:"",isFinish:!0}),y=d(-1),D=d(""),ne=b=>b.orderName+(b.desk?"-"+b.desk+"号桌":"");return(b,i)=>{const Y=Ze,ae=nt,B=Be,J=Me,le=Ge,se=xe,re=Ne,U=De,H=Oe,K=Pe,Q=ge,ie=Se,ue=Ve;return _(),E(Z,null,[w("div",at,[s(re,{modelValue:c($),"onUpdate:modelValue":i[0]||(i[0]=a=>S($)?$.value=a:null),onRefresh:G},{default:l(()=>[w("div",null,[w("h2",lt,[h(" 今日订单 "),s(c(ke),{class:"ml-[4px]"})]),(_(!0),E(Z,null,be(c(u).orderList,(a,ce)=>(_(),T(le,{onClick:de=>O(a.id,a.orderName),ref_for:!0,ref_key:"swipe",ref:k,key:a.id},Ce({default:l(()=>[s(B,{title:ne(a),"sub-title":`创建时间：${a.showTime}`},{link:l(()=>[w("div",st,[a.isFinish?(_(),T(Y,{key:1,type:"success",style:{height:"26px","margin-right":"4px"}},{default:l(()=>[h("已完成")]),_:1})):(_(),T(Y,{key:0,type:"warning",style:{height:"26px","margin-right":"4px"}},{default:l(()=>[h("进行中")]),_:1})),a.isPack?(_(),T(Y,{key:2,type:"success",style:{height:"26px","margin-right":"4px"}},{default:l(()=>[h("打包")]),_:1})):F("",!0),a.taste&&a.taste!=1?(_(),T(Y,{key:3,type:j[a.taste],style:{height:"26px","margin-right":"4px"}},{default:l(()=>[h(we(I[a.taste-1]),1)]),_:2},1032,["type"])):F("",!0),a.undoneRecord?(_(),T(ae,{key:4,type:"flicker",loop:!0,style:{position:"absolute",left:"50%",top:"0",transform:"translateX(-50%)"}},{default:l(()=>[s(Y,{type:"danger",style:{height:"20px"}},{default:l(()=>[h("有加菜")]),_:1})]),_:1})):F("",!0)])]),_:2},1032,["title","sub-title"])]),_:2},[a.isFinish?void 0:{name:"right",fn:l(()=>[s(J,{shape:"square",style:{height:"100%"},type:"danger",onClick:$e(de=>{m.value=!0,c(n).actualMoney=String(a.totalMoney),c(n).id=a.id,y.value=ce},["stop"])},{default:l(()=>[h(" 设置已完成 ")]),_:2},1032,["onClick"])]),key:"0"}]),1032,["onClick"]))),128)),c(u).orderList.length==0?(_(),T(se,{key:0,description:"今日还没有开张哦"})):F("",!0)]),w("div",rt,[s(J,{block:"",type:"primary",onClick:v},{icon:l(()=>[s(c(Ye))]),default:l(()=>[h(" 添加订单 ")]),_:1})])]),_:1},8,["modelValue"])]),s(Q,{teleport:"#app",title:"添加订单",visible:c(o),"onUpdate:visible":i[5]||(i[5]=a=>S(o)?o.value=a:null),onOk:M},{default:l(()=>[s(B,null,{default:l(()=>[s(U,{ref_key:"orderInput",ref:V,modelValue:c(p),"onUpdate:modelValue":i[1]||(i[1]=a=>S(p)?p.value=a:null),placeholder:"请输入订单名称",clearable:""},null,8,["modelValue"])]),_:1}),s(B,null,{default:l(()=>[s(K,{modelValue:c(C),"onUpdate:modelValue":i[2]||(i[2]=a=>S(C)?C.value=a:null),direction:"horizontal"},{default:l(()=>[s(H,{label:"1"},{default:l(()=>[h("在这吃")]),_:1}),s(H,{label:"2"},{default:l(()=>[h("打包")]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(B,null,{default:l(()=>[s(K,{modelValue:c(P),"onUpdate:modelValue":i[3]||(i[3]=a=>S(P)?P.value=a:null),direction:"horizontal"},{default:l(()=>[s(H,{label:"1"},{default:l(()=>[h("正常辣")]),_:1}),s(H,{label:"2"},{default:l(()=>[h("微辣")]),_:1}),s(H,{label:"3"},{default:l(()=>[h("特辣")]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(B,null,{default:l(()=>[s(U,{modelValue:c(D),"onUpdate:modelValue":i[4]||(i[4]=a=>S(D)?D.value=a:null),type:"digit",placeholder:"请输入桌号(选填)",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["visible"]),s(Q,{teleport:"#app",title:"设置订单已完成",visible:c(m),"onUpdate:visible":i[7]||(i[7]=a=>S(m)?m.value=a:null),onOk:f},{default:l(()=>[s(ue,null,{default:l(()=>[s(ie,{label:"实收金额"},{default:l(()=>[s(U,{modelValue:c(n).actualMoney,"onUpdate:modelValue":i[6]||(i[6]=a=>c(n).actualMoney=a),class:"nut-input-text",placeholder:"请输入实收金额",type:"text"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["visible"])],64)}}});export{Ct as default};
