import{J as j,K as A,o as s,d as c,l as I,n as L,e as r,r as C,a as q,c as v,w as D,N as R,_ as W,b as H,T as J,h as K,f as p,k as y,j as G,aj as Q,H as w,A as U,a9 as X,ai as Y,s as Z,M as _}from"./index-7e616a8f.js";const x=A("mask-close"),ee=r("path",{d:"M512 14.897C238.594 14.897 14.897 238.594 14.897 512S238.594 1009.103 512 1009.103 1009.103 785.406 1009.103 512 785.406 14.897 512 14.897zm207.126 646.234c16.57 16.57 16.57 41.425 0 57.995s-41.425 16.57-57.995 0L512 569.996l-149.13 149.13c-16.57 16.57-41.426 16.57-57.996 0s-16.57-41.425 0-57.995L454.004 512l-149.13-149.13c-16.57-16.57-16.57-41.426 0-57.996s41.425-16.57 57.995 0L512 454.004l149.13-149.13c16.57-16.57 41.426-16.57 57.996 0s16.57 41.425 0 57.995L569.996 512l149.13 149.13z",fill:"currentColor","fill-opacity":"0.9"},null,-1),te=[ee];function ne(e,n,o,a,i,m){return s(),c("svg",{class:I(e.classes),style:L(e.style),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",role:"presentation"},te,6)}const oe=j(x,[["render",ne]]);var ae=Object.defineProperty,k=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,S=(e,n,o)=>n in e?ae(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,re=(e,n)=>{for(var o in n||(n={}))le.call(n,o)&&S(e,o,n[o]);if(k)for(var o of k(n))se.call(n,o)&&S(e,o,n[o]);return e};function B(e,n,o){const a=e.indexOf(n);return a===-1?e:n==="-"&&a!==0?e.slice(0,a):e.slice(0,a+1)+e.slice(a).replace(o,"")}function V(e,n=!0,o=!0){n?e=B(e,".",/\./g):e=e.split(".")[0],o?e=B(e,"-",/-/g):e=e.replace(/-/,"");const a=n?/[^-0-9.]/g:/[^-0-9]/g;return e.replace(a,"")}const{componentName:ie,create:ue}=H("input"),de=ue({props:{type:{type:String,default:"text"},modelValue:{type:String,default:""},placeholder:{type:String,default:""},inputAlign:{type:String,default:"left"},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxLength:{type:[String,Number],default:""},clearable:{type:Boolean,default:!1},clearSize:{type:[String,Number],default:"14"},border:{type:Boolean,default:!0},formatTrigger:{type:String,default:"onChange"},formatter:{type:Function,default:null},showWordLimit:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},confirmType:{type:String,default:"done"},error:{type:Boolean,default:!1},showClearIcon:{type:Boolean,default:!1},class:{type:String,default:""}},components:{MaskClose:oe},emits:["update:modelValue","blur","focus","clear","keypress","click","clickInput"],expose:["focus","blur","select"],setup(e,{emit:n}){const o=C(!1),a=C(),i=()=>{var t;return String((t=e.modelValue)!=null?t:"")},m=t=>J("input",re({style:h},b(t))),u=q({focused:!1,validateFailed:!1,validateMessage:""}),d=v(()=>{const t=ie;return{[t]:!0,[`${t}--disabled`]:e.disabled,[`${t}--required`]:e.required,[`${t}--error`]:e.error,[`${t}--border`]:e.border,[e.class]:!!e.class}}),h=v(()=>({textAlign:e.inputAlign})),b=t=>t==="number"?{type:"text"}:t==="digit"?{type:"tel"}:{type:t},$=t=>{if(!t.target.composing){let l=t.target.value;e.maxLength&&l.length>Number(e.maxLength)&&(l=l.slice(0,Number(e.maxLength))),f(l)}},f=(t,g="onChange")=>{var l;e.type==="digit"&&(t=V(t,!1,!1)),e.type==="number"&&(t=V(t,!0,!0)),e.formatter&&g===e.formatTrigger&&(t=e.formatter(t)),((l=a==null?void 0:a.value)==null?void 0:l.value)!==t&&(a.value.value=t),t!==e.modelValue&&n("update:modelValue",t)},N=t=>{e.disabled||e.readonly||(o.value=!0,n("focus",t))},z=t=>{if(e.disabled||e.readonly)return;setTimeout(()=>{o.value=!1},200);let l=t.target.value;e.maxLength&&l.length>Number(e.maxLength)&&(l=l.slice(0,Number(e.maxLength))),f(i(),"onBlur"),n("blur",t)},T=t=>{t.stopPropagation(),!e.disabled&&(n("update:modelValue","",t),n("clear","",t))},M=()=>{u.validateFailed&&(u.validateFailed=!1,u.validateMessage="")},O=t=>{e.disabled||n("clickInput",t)},P=t=>{n("click",t)},F=({target:t})=>{t.composing=!0},E=({target:t})=>{t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))};return D(()=>e.modelValue,()=>{f(i()),M()}),R(()=>{f(i(),e.formatTrigger)}),{renderInput:m,inputRef:a,active:o,classes:d,styles:h,inputType:b,onInput:$,onFocus:N,onBlur:z,clear:T,startComposing:F,endComposing:E,onClick:P,onClickInput:O,focus:()=>{var t;(t=a.value)==null||t.focus()},blur:()=>{var t;(t=a.value)==null||t.blur()},select:()=>{var t;(t=a.value)==null||t.select()}}}}),ce={class:"nut-input-value"},fe={class:"nut-input-inner"},me={key:0,class:"nut-input-left-box"},ge={class:"nut-input-box"},pe={key:0,class:"nut-input-word-limit"},ye={class:"nut-input-word-num"},he={class:"nut-input-right-box"};function be(e,n,o,a,i,m){const u=K("MaskClose");return s(),c("view",{class:I(e.classes),onClick:n[1]||(n[1]=(...d)=>e.onClick&&e.onClick(...d))},[r("view",ce,[r("view",fe,[e.$slots.left?(s(),c("view",me,[p(e.$slots,"left")])):y("",!0),r("view",ge,[(s(),G(Q(e.renderInput(e.type)),{ref:"inputRef",class:"input-text",style:L(e.styles),maxlength:e.maxLength,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,value:e.modelValue,"format-trigger":e.formatTrigger,autofocus:e.autofocus,enterkeyhint:e.confirmType,onInput:e.onInput,onFocus:e.onFocus,onBlur:e.onBlur,onClick:e.onClickInput,onChange:e.endComposing,onCompositionend:e.endComposing,onCompositionstart:e.startComposing},null,40,["style","maxlength","placeholder","disabled","readonly","value","format-trigger","autofocus","enterkeyhint","onInput","onFocus","onBlur","onClick","onChange","onCompositionend","onCompositionstart"])),e.showWordLimit&&e.maxLength?(s(),c("view",pe,[r("span",ye,w(e.modelValue?e.modelValue.length:0),1),U("/"+w(e.maxLength),1)])):y("",!0)]),e.clearable&&!e.readonly?X((s(),c("view",{key:1,class:"nut-input-clear-box",onClick:n[0]||(n[0]=(...d)=>e.clear&&e.clear(...d))},[p(e.$slots,"clear",{},()=>[Z(u,_({class:"nut-input-clear"},e.$attrs,{size:e.clearSize,width:e.clearSize,height:e.clearSize}),null,16,["size","width","height"])])],512)),[[Y,(e.active||e.showClearIcon)&&e.modelValue.length>0]]):y("",!0),r("view",he,[p(e.$slots,"right")])])])],2)}const Ce=W(de,[["render",be]]),ve=e=>e,Ve=ve(Ce);export{Ve as I};
