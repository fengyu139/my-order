import{d as L,w as K,r as c,c as B,i as be,a as ne,b as G,o as y,e as U,f as $,g as F,n as J,h as C,j as ie,u as d,k as ke,l as E,m as ue,p as j,q as we,s as $e,t as n,v as r,x as S,F as ee,y as W,z as Oe,D as Pe,A as v,B as xe,C as Ce,E as Ve,G as De,H as Me,_ as Te}from"./index-1a998e25.js";import{_ as Se,a as Ne}from"./index-0426dddc.js";import{_ as Ye,a as je}from"./index-6824c424.js";import{_ as Be}from"./index-9120f2a1.js";import{i as He}from"./index-ce50d8b6.js";import{_ as Ie}from"./index-0de3a2de.js";/* empty css              *//* empty css              */import{w as Re}from"./Plus-ddd558e3.js";import{_ as Ee}from"./Cell-39b9cfde.js";import{u as Fe}from"./index-I8tfW3Kf-71bb0ac5.js";import"./common-BH7uB7Cn-929e3022.js";import"./pxCheck-DN6FYV6q-3938f682.js";import"./CheckNormal-a7c26b17.js";import"./index-BvmDLUYP-41568dd6.js";const Ue=Symbol("nut-swipe");var Le=Object.defineProperty,qe=Object.defineProperties,ze=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,Ae=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,oe=(s,o,t)=>o in s?Le(s,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[o]=t,Ge=(s,o)=>{for(var t in o||(o={}))Ae.call(o,t)&&oe(s,t,o[t]);if(te)for(var t of te(o))We.call(o,t)&&oe(s,t,o[t]);return s},Ke=(s,o)=>qe(s,ze(o));const pe=L(Ke(Ge({},{name:"NutSwipe"}),{__name:"swipe",props:{name:{default:""},touchMoveStopPropagation:{type:Boolean,default:!1},touchMovePreventDefault:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["open","close","click"],setup(s,{expose:o,emit:t}){const u=s,p=t,O=e=>{var i;return((i=e.value)==null?void 0:i.getBoundingClientRect().width)||0},m=c(!1),g=c(),a=B(()=>O(g)),N=c(),b=B(()=>O(N)),k=be(Ue,null);ne(()=>{var e;return(e=k==null?void 0:k.name)==null?void 0:e.value},e=>{u.name!==e&&k&&k.lock&&D()});const V=c(!1);let h="",P="";const f=G({offset:0,moving:!1}),H=(e="")=>{k&&k.update(u.name),V.value=!0,e&&(f.offset=e==="left"?-b.value:a.value),p("open",{name:u.name,position:h||e})},D=()=>{f.offset=0,V.value&&(V.value=!1,p("close",{name:u.name,position:h}))},x=(e,i,w)=>{w?e.stopPropagation():D(),p("click",i)},q=B(()=>({transform:`translate3d(${f.offset}px, 0, 0)`})),M=e=>{h=e>0?"right":"left";let i=e;switch(h){case"left":V.value&&P===h?i=-b.value:i=Math.abs(e)>b.value?-b.value:e;break;case"right":V.value&&P===h?i=a.value:i=Math.abs(e)>a.value?a.value:e;break}f.offset=i},T=Fe(),Y=e=>{u.disabled||T.start(e)},z=e=>{u.disabled||(T.move(e),T.isHorizontal()&&(m.value=!0,f.moving=!0,M(T.deltaX.value),u.touchMovePreventDefault&&e.preventDefault(),u.touchMoveStopPropagation&&e.stopPropagation()))},_=()=>{if(f.moving){switch(f.moving=!1,P=h,h){case"left":Math.abs(f.offset)<=b.value/2?D():(f.offset=-b.value,H());break;case"right":Math.abs(f.offset)<=a.value/2?D():(f.offset=a.value,H());break}setTimeout(()=>{m.value=!1},0)}};return o({open:H,close:D}),(e,i)=>(y(),U("view",{class:"nut-swipe",style:J(q.value),onTouchstart:Y,onTouchmove:z,onTouchend:_,onTouchcancel:_},[$("view",{ref_key:"leftRef",ref:g,class:"nut-swipe__left",onClick:i[0]||(i[0]=w=>x(w,"left",!0))},[F(e.$slots,"left")],512),$("view",{class:"nut-swipe__content",onClick:i[1]||(i[1]=w=>x(w,"content",m.value))},[F(e.$slots,"default")]),$("view",{ref_key:"rightRef",ref:N,class:"nut-swipe__right",onClick:i[2]||(i[2]=w=>x(w,"right",!0))},[F(e.$slots,"right")],512)],36))}}));K(pe);var Je=Object.defineProperty,Qe=Object.defineProperties,Ze=Object.getOwnPropertyDescriptors,ae=Object.getOwnPropertySymbols,Xe=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable,se=(s,o,t)=>o in s?Je(s,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[o]=t,tt=(s,o)=>{for(var t in o||(o={}))Xe.call(o,t)&&se(s,t,o[t]);if(ae)for(var t of ae(o))et.call(o,t)&&se(s,t,o[t]);return s},ot=(s,o)=>Qe(s,Ze(o));const fe=L(ot(tt({},{name:"NutTag"}),{__name:"tag",props:{color:{default:""},textColor:{default:""},type:{default:"default"},plain:{type:Boolean,default:!1},round:{type:Boolean,default:!1},mark:{type:Boolean,default:!1},closeable:{type:Boolean,default:!1}},emits:["close","click"],setup(s,{emit:o}){const t=s,u=o,p=B(()=>{const a="nut-tag";return{[a]:!0,[`${a}--${t.type}`]:t.type,[`${a}--plain`]:t.plain,[`${a}--round`]:t.round,[`${a}--mark`]:t.mark}}),O=B(()=>{const a={};return t.textColor?a.color=t.textColor:t.color&&t.plain&&(a.color=t.color),t.plain?(a.background="#fff",a.borderColor=t.color):t.color&&(a.background=t.color),a}),m=a=>{u("close",a)},g=a=>{u("click",a)};return(a,N)=>(y(),U("view",{class:ue(p.value),style:J(O.value),onClick:g},[F(a.$slots,"default"),a.closeable?(y(),C(d(ke),{key:0,class:"nut-tag--close",width:"12px",height:"12px",onClick:ie(m,["stop"])})):E("",!0)],6))}}));K(fe);var at=Object.defineProperty,st=Object.defineProperties,lt=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,rt=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,re=(s,o,t)=>o in s?at(s,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[o]=t,it=(s,o)=>{for(var t in o||(o={}))rt.call(o,t)&&re(s,t,o[t]);if(le)for(var t of le(o))nt.call(o,t)&&re(s,t,o[t]);return s},ut=(s,o)=>st(s,lt(o));const pt={class:"nut-animate"},de=L(ut(it({},{name:"NutAnimate"}),{__name:"animate",props:{type:{},show:{type:Boolean,default:!1},action:{default:""},loop:{type:Boolean,default:!1},duration:{default:500}},emits:["click","animate"],setup(s,{emit:o}){const t=s,u=o,p=c(t.action==="initial"||t.show===!0||t.loop),O=B(()=>({"nut-animate__container":!0,[`nut-animate-${t.type}`]:p.value,loop:t.loop})),m=()=>{p.value=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{p.value=!0})})},g=a=>{t.action==="click"&&(m(),u("click",a),u("animate"))};return ne(()=>t.show,a=>{a&&(m(),u("animate"))}),(a,N)=>(y(),U("view",pt,[$("view",{class:ue(O.value),style:J({animationDuration:a.duration?`${a.duration}ms`:void 0}),onClick:g},[F(a.$slots,"default")],6)]))}}));K(de);const ft={class:"pb-[50px] min-h-[80vh]"},dt={class:"flex justify-center items-center text-red-500 pt-[12px]"},ct={class:"mt-[4px]"},mt={class:"p-[12px]"},Mt=L({__name:"home",setup(s){const o=G({startTime:"",endTime:""});j().hour()<12?(o.startTime=j().startOf("day").subtract(12,"hour").format("YYYY-MM-DD HH:mm:ss"),o.endTime=j().endOf("day").subtract(12,"hour").format("YYYY-MM-DD HH:mm:ss")):(o.startTime=j().startOf("day").add(12,"hour").format("YYYY-MM-DD HH:mm:ss"),o.endTime=j().endOf("day").add(12,"hour").format("YYYY-MM-DD HH:mm:ss"));const u=we(),p=$e();p.getOrderList(o);const O=async()=>{p.updateOrder(M).then(()=>{W.success("设置成功"),p.getOrderList(o),b.value[T.value].close()})},m=c(!1),g=c(!1),a=c(""),N=()=>{if(!a.value){W.fail("请输入订单名称"),setTimeout(()=>{m.value=!0},500);return}Oe.post("/addOrder",{orderName:a.value,isPack:P.value=="2",taste:Number(f.value),isFinish:!1,totalMoney:0,actualMoney:0,desk:Number(Y.value)||""}).then(_=>{_.code==1&&(W.success("订单创建成功,请添加菜品"),h(_.data,a.value))})},b=c(null),k=c(null),V=()=>{let _=j().format("HH:mm");a.value=_+"-"+(p.orderList.length+1)+"号订单",m.value=!0,Me(()=>{k.value.focus()})},h=(_,e)=>{u.push({path:"/orderDetail",query:{id:_,orderName:e}})},P=c("1"),f=c("1"),H=["正常辣","微辣","特辣"],D=["","danger","warning"],x=c(!1),q=()=>{p.getOrderList(o),setTimeout(()=>{x.value=!1},500)},M=G({actualMoney:"",id:"",isFinish:!0}),T=c(-1),Y=c(""),z=_=>_.orderName+(_.desk?"-"+_.desk+"号桌":"");return(_,e)=>{const i=fe,w=de,I=Ee,Q=Te,ce=pe,me=Ie,_e=He,A=Be,R=Ye,Z=je,X=Pe,ve=Se,ye=Ne;return y(),U(ee,null,[$("div",ft,[n(_e,{modelValue:d(x),"onUpdate:modelValue":e[0]||(e[0]=l=>S(x)?x.value=l:null),onRefresh:q},{default:r(()=>[$("div",null,[$("h2",dt,[e[8]||(e[8]=v(" 今日订单 ")),n(d(xe),{class:"ml-[4px]"})]),(y(!0),U(ee,null,Ce(d(p).orderList,(l,ge)=>(y(),C(ce,{onClick:he=>h(l.id,l.orderName),ref_for:!0,ref_key:"swipe",ref:b,key:l.id},Ve({default:r(()=>[n(I,{title:z(l),"sub-title":`创建时间：${l.showTime}`},{link:r(()=>[$("div",ct,[l.isFinish?(y(),C(i,{key:1,type:"success",style:{height:"26px","margin-right":"4px"}},{default:r(()=>e[10]||(e[10]=[v("已完成")])),_:1})):(y(),C(i,{key:0,type:"warning",style:{height:"26px","margin-right":"4px"}},{default:r(()=>e[9]||(e[9]=[v("进行中")])),_:1})),l.isPack?(y(),C(i,{key:2,type:"success",style:{height:"26px","margin-right":"4px"}},{default:r(()=>e[11]||(e[11]=[v("打包")])),_:1})):E("",!0),l.taste&&l.taste!=1?(y(),C(i,{key:3,type:D[l.taste],style:{height:"26px","margin-right":"4px"}},{default:r(()=>[v(De(H[l.taste-1]),1)]),_:2},1032,["type"])):E("",!0),l.undoneRecord?(y(),C(w,{key:4,type:"flicker",loop:!0,style:{position:"absolute",left:"50%",top:"0",transform:"translateX(-50%)"}},{default:r(()=>[n(i,{type:"danger",style:{height:"20px"}},{default:r(()=>e[12]||(e[12]=[v("有加菜")])),_:1})]),_:1})):E("",!0)])]),_:2},1032,["title","sub-title"])]),_:2},[l.isFinish?void 0:{name:"right",fn:r(()=>[n(Q,{shape:"square",style:{height:"100%"},type:"danger",onClick:ie(he=>{g.value=!0,d(M).actualMoney=String(l.totalMoney),d(M).id=l.id,T.value=ge},["stop"])},{default:r(()=>e[13]||(e[13]=[v(" 设置已完成 ")])),_:2},1032,["onClick"])]),key:"0"}]),1032,["onClick"]))),128)),d(p).orderList.length==0?(y(),C(me,{key:0,description:"今日还没有开张哦"})):E("",!0)]),$("div",mt,[n(Q,{block:"",type:"primary",onClick:V},{icon:r(()=>[n(d(Re))]),default:r(()=>[e[14]||(e[14]=v(" 添加订单 "))]),_:1})])]),_:1},8,["modelValue"])]),n(X,{teleport:"#app",title:"添加订单",visible:d(m),"onUpdate:visible":e[5]||(e[5]=l=>S(m)?m.value=l:null),onOk:N},{default:r(()=>[n(I,null,{default:r(()=>[n(A,{ref_key:"orderInput",ref:k,modelValue:d(a),"onUpdate:modelValue":e[1]||(e[1]=l=>S(a)?a.value=l:null),placeholder:"请输入订单名称",clearable:""},null,8,["modelValue"])]),_:1}),n(I,null,{default:r(()=>[n(Z,{modelValue:d(P),"onUpdate:modelValue":e[2]||(e[2]=l=>S(P)?P.value=l:null),direction:"horizontal"},{default:r(()=>[n(R,{label:"1"},{default:r(()=>e[15]||(e[15]=[v("在这吃")])),_:1}),n(R,{label:"2"},{default:r(()=>e[16]||(e[16]=[v("打包")])),_:1})]),_:1},8,["modelValue"])]),_:1}),n(I,null,{default:r(()=>[n(Z,{modelValue:d(f),"onUpdate:modelValue":e[3]||(e[3]=l=>S(f)?f.value=l:null),direction:"horizontal"},{default:r(()=>[n(R,{label:"1"},{default:r(()=>e[17]||(e[17]=[v("正常辣")])),_:1}),n(R,{label:"2"},{default:r(()=>e[18]||(e[18]=[v("微辣")])),_:1}),n(R,{label:"3"},{default:r(()=>e[19]||(e[19]=[v("特辣")])),_:1})]),_:1},8,["modelValue"])]),_:1}),n(I,null,{default:r(()=>[n(A,{modelValue:d(Y),"onUpdate:modelValue":e[4]||(e[4]=l=>S(Y)?Y.value=l:null),type:"digit",placeholder:"请输入桌号(选填)",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["visible"]),n(X,{teleport:"#app",title:"设置订单已完成",visible:d(g),"onUpdate:visible":e[7]||(e[7]=l=>S(g)?g.value=l:null),onOk:O},{default:r(()=>[n(ye,null,{default:r(()=>[n(ve,{label:"实收金额"},{default:r(()=>[n(A,{modelValue:d(M).actualMoney,"onUpdate:modelValue":e[6]||(e[6]=l=>d(M).actualMoney=l),class:"nut-input-text",placeholder:"请输入实收金额",type:"text"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["visible"])],64)}}});export{Mt as default};
